{% extends 'app/base.html' %}
{% load static %}
{% block title %}Orders{% endblock title %}
{% block main-content %}
{% if messages %}
{% for message in messages %}
<div class="alert alert-info alert-dismissible fade show" role="success" data-bs-dismiss="success">
  <p class= 'text-center'><strong>Hi {{user.first_name}}!</strong> Welcome to Eshopping.</p>
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endfor %}
{% endif %} 

<div class="container my-5">
  <div class="row">
    <div class="col-sm-2 border-end">
      <ul class="list-unstyled">
        <div id="list-example" class="list-group text-center">
        <div class="d-grid gap-2 col-6 mx-auto">
        <li class="list-group-item list-group-item-action"><a class="btn " href="{% url 'profile' %}">Profile</a></li>
        <li class="list-group-item list-group-item-action"><a class="btn {{active}}" href="{% url 'orders' %}">Orders</a></li>
        <li class="list-group-item list-group-item-action"><a class="btn" href="{% url 'editprofile' %}">Edit Profile</a></li>
        <li class="list-group-item list-group-item-action"><a class="btn" href="{% url 'changepassword' %}">Change Password</a></li>
        </div>
        </div>
      </ul>
    </div>
    <div class="col-sm-10">
      <h3>{{user.first_name}} Orders!</h3><hr>
        <div class="container my-5">
           {% for op in order_placed %}
           <div class="card">
                <div class="row">
                    <div class="col-sm-4">
                        <div class="card-body">
                        <h5>Title: {{op.product.title}}</h5>
                        {% comment %} {% for detail in details %} {% endcomment %}
                        <span>Quantity: {{op.quantity}} </span><br>
                        <span>Date: {{op.ordered_date}} </span>
                        <p>Price: {{op.total_cost}} </p>
                        </div>   
                    </div>
                    <div class="col-sm-4">
                    <div class="col text-center align-self-center mt-2 mb-2"><img src={{op.product.product_image.url}} alt="" 
                    srcset="" class="img-fluid img-thumbnail shadow-sm" height="150" width="150"> </div>
                    </div>
                    <div class="col-sm-3 mt-4">Order Status: {{op.status}}<br><br>
                    {% if op.status == 'Pending' %}
                    <div class = 'progress'>
                    <div class= 'progress-bar' role= 'progressbar' style='width: 0%' 
                    aria-valuenow='0' aria-valuemin='0' aria-valuemax='100'></div>
                    </div>
                    {% endif %}
                    {% if op.status == 'Accepted' %}
                    <div class = 'progress'>
                    <div class= 'progress-bar' role= 'progressbar' style='width: 20%' 
                    aria-valuenow='20' aria-valuemin='0' aria-valuemax='100'></div>
                    </div>
                    {% endif %}
                    {% if op.status == 'Packed' %}
                    <div class = 'progress'>
                    <div class= 'progress-bar bg-info' role= 'progressbar' style='width: 40%' 
                    aria-valuenow='40' aria-valuemin='0' aria-valuemax='100'></div>
                    </div>
                    {% endif %}
                    {% if op.status == 'On The Way' %}
                    <div class = 'progress'>
                    <div class= 'progress-bar bg-warning' role= 'progressbar' style='width: 70%' 
                    aria-valuenow='70' aria-valuemin='0' aria-valuemax='100'></div>
                    </div>
                    {% endif %}
                    {% if op.status == 'Delivered' %}
                    <div class = 'progress'>
                    <div class= 'progress-bar bg-success' role= 'progressbar' style='width: 100%' 
                    aria-valuenow='100' aria-valuemin='0' aria-valuemax='100'></div>
                    </div>
                    {% endif %}
                    </div>
                 </div>
             </div> 
             {% endfor %}  
        </div> 
        
         
      
         {% comment %} {% endfor %} {% endcomment %}
      
      
        </div>
      
   
  </div>  
</div>  

{% endblock main-content %}